{
	"source": "http://www.di.fc.ul.pt/~jpn/gv/Archers.pdf",
	"board": {
		"height": 9,
		"width": 9,
		"terrain": [
			{"pos":2002,"type":"base","plr":1},{"pos":2003,"type":"base","plr":1},{"pos":2004,"type":"base","plr":1},
			{"pos":3002,"type":"base","plr":1},{"pos":3003,"type":"base","plr":1},{"pos":3004,"type":"base","plr":1},
			{"pos":4002,"type":"base","plr":1},{"pos":4003,"type":"base","plr":1},{"pos":4004,"type":"base","plr":1},
			{"pos":6006,"type":"base","plr":2},{"pos":6007,"type":"base","plr":2},{"pos":6008,"type":"base","plr":2},
			{"pos":7006,"type":"base","plr":2},{"pos":7007,"type":"base","plr":2},{"pos":7008,"type":"base","plr":2},
			{"pos":8006,"type":"base","plr":2},{"pos":8007,"type":"base","plr":2},{"pos":8008,"type":"base","plr":2}
		],
		"setup": [
			{"pos":2002,"type":"archer","plr":1},{"pos":2003,"type":"archer","plr":1},{"pos":2004,"type":"archer","plr":1},
			{"pos":3002,"type":"archer","plr":1},{"pos":3003,"type":"king","plr":1},{"pos":3004,"type":"archer","plr":1},
			{"pos":4002,"type":"archer","plr":1},{"pos":4003,"type":"archer","plr":1},{"pos":4004,"type":"archer","plr":1},
			{"pos":6006,"type":"archer","plr":2},{"pos":6007,"type":"archer","plr":2},{"pos":6008,"type":"archer","plr":2},
			{"pos":7006,"type":"archer","plr":2},{"pos":7007,"type":"king","plr":2},{"pos":7008,"type":"archer","plr":2},
			{"pos":8006,"type":"archer","plr":2},{"pos":8007,"type":"archer","plr":2},{"pos":8008,"type":"archer","plr":2}
		]
	},
	"generators": {
		"findinfiltrators": {
			"type": "filter",
			"layer": "MYUNITS",
			"overlapping": "TERRAIN",
			"matching": {"plr":["ISNT",["CONTEXTVAL","CURRENTPLAYER"]]},
			"tolayer": "infiltrators"
		},
		"findkilltargets": {
			"type": "filter",
			"layer": "bullseye",
			"matching": {"shooterid":["IS",["IDAT",["MARKPOS","selectunit"]]]},
			"tolayer": "gonnadie"
		},
		"finddeadkings": {
			"type": "filter",
			"layer": "DEADUNITS",
			"matching": {
				"type": ["IS",["VAL","crown"]]
			},
			"tolayer": "deadking"
		},
		"findarrows": {
			"type": "walker",
			"starts": ["FROMALLINLAYER","UNITS"],
			"dir": ["RELATIVEDIR",["VAL",1],["LOOKUP","UNITS",["CONTEXTPOS","START"],"dir"]],
			"stops": "UNITS",
			"max": 3,
			"drawstep": {
				"tolayer": ["IFELSE",["SAME",["LOOKUP","UNITS",["CONTEXTPOS","START"],"plr"],["CONTEXTVAL","CURRENTPLAYER"]],"myarrows","opparrows"],
				"include": {
					"plr": ["LOOKUP","UNITS",["CONTEXTPOS","START"],"plr"]
				}
			},
			"drawstop": {
				"condition": ["AND",
					["ANYAT","UNITS",["CONTEXTPOS","TARGET"]],
					["DIFFERENT",
						["LOOKUP","UNITS",["CONTEXTPOS","TARGET"],"plr"],
						["LOOKUP","UNITS",["CONTEXTPOS","START"],"plr"]
					]
				],
				"tolayer": "bullseye",
				"include": {
					"plr": ["LOOKUP","UNITS",["CONTEXTPOS","START"],"plr"],
					"shooterid": ["IDAT",["CONTEXTPOS","START"]]
				}
			}
		},
		"findfooting": {
			"type": "nextto",
			"start": ["FROMMARK","selectunit"],
			"dirs": ["RELATIVEDIRS",["DIRS",1,5],["LOOKUP","UNITS",["CONTEXTPOS","START"],"dir"]],
			"drawtarget": {
				"condition": ["AND",["NONEAT","UNITS",["CONTEXTPOS","TARGET"]],["NONEAT","opparrows",["CONTEXTPOS","TARGET"]]],
				"layer": ["IFELSE",["SAME",["CONTEXTVAL","DIR"],["LOOKUP","UNITS",["CONTEXTPOS","START"],"dir"]],"forwardfooting","backwardfooting"],
				"include": {
					"id": ["IDAT","START"]
				}
			}
		}
	},
	"marks": {
		"selectunit": {
			"fromlayer":"MYUNITS"
		}
	},
	"endturn": {
		"condition":["SAME",["CONTEXTVAL","PERFORMEDSTEPS"],2],
		"commandcap": true
	},
	"endgame": {
		"infiltration":[["NOTEMPTY","infiltrators"],["CONTEXTVAL","CURRENTPLAYER"]],
		"kingkill":[["NOTEMPTY","deadking"],["CONTEXTVAL","CURRENTPLAYER"]]
	},
	"commands": {
		"stepforward": {
			"condition": ["NOTEMPTY","forwardfooting"],
			"effects": [["MOVEUNIT",["IDAT","selectunit"],["ONLYPOSIN","forwardfooting"]]]
		},
		"stepbackward": {
			"condition": ["NOTEMPTY","backwardfooting"],
			"effects": [["MOVEUNIT",["IDAT","selectunit"],["ONLYPOSIN","backwardfooting"]]]
		},
		"turnleft": {
			"effects": [["TURNUNIT",["IDAT","selectunit"],-1]]
		},
		"turnright": {
			"effects":[["TURNUNIT",["IDAT","selectunit"],1]]
		},
		"fire": {
			"condition": ["AND",["NOTEMPTY","gonnadie"],["NOT",["AFFECTED",["IDAT","selectunit"]]]],
			"effects": [["KILLUNIT",["IDAT",["ONLYPOSIN","gonnadie"]]]]
		}
	}
}