{
	"source": "https://boardgamegeek.com/boardgame/73091/momentum",
	"name": "Momentum",
	"board": {"height":9,"width":9},
	"terrain": {"edge":[{"pos":5005},["rectangle",1001,1009],["rectangle",1001,9001],["rectangle",9001,9009],["rectangle",1009,9009]]},
	"graphics": {"tiles": {"edge":"water"}, "icons": {"soldiers":"pawns"} },
	"marks": {
		"selectdrop": {
			"from": ["subtract","noedge","units"],
			"rungenerators": ["findpushtargets"]
		}
	},
	"commands": {
		"drop": {
			"requiredmarks": ["selectdrop"],
			"effect": ["multieffect",[
				["spawnunit","selectdrop","soldiers",["contextval","currentplayer"]],
				["forallposin","tobepushed",
					["offsetunit",["idofunitat",["contextpos","target"]],["lookup","tobepushed",["contextpos","target"],"dir"],1]
				]
			]]
		}
	},
	"generators": {
		"findpushtargets": {
			"type": "walker",
			"starts": "selectdrop",
			"steps": "units",
			"draw": {
				"steps": {
					"condition": ["same",["contextval","step"],["contextval","linelength"]],
					"tolayer": "tobepushed",
					"include": {"dir":["contextval","dir"]}
				}
			}
		}
	},
	"startturn": {
		"applyeffect": ["forallin","edge", ["killunit",["loopid"]] ]
	},
	"endturn": {
		"condition": ["truthy",["contextval","performedsteps"]],
		"commandcap": true,
		"endgame": {
			"deployedall": {"condition":["same",["positionsin",["intersect","myunits","noedge"]],12],"result":"win"}
		}
	}
}