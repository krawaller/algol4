{
	"source": "http://www.chessvariants.org/other.dir/amazons.html",
	"board": {
		"height": 10,
		"width": 10,
		"setup": [
			{"x":4,"y":1,"plr":1},{"x":7,"y":1,"plr":1},{"x":1,"y":4,"plr":1},{"x":10,"y":4,"plr":1},
			{"x":4,"y":10,"plr":1},{"x":7,"y":10,"plr":1},{"x":1,"y":7,"plr":1},{"x":10,"y":7,"plr":1}
		]
	},
	"startturn": {
		"hydration": ["findblocks","findfiretargets"]
	},
	"marks": {
		"selectunit": {
			"condition": ["NOT",["HASPERFORMEDCOMMAND","move"]],
			"fromlayer": "MYUNITS",
			"hydration": ["findmovetargets"]
		},
		"selectmove": {
			"condition": ["NOT",["HASPERFORMEDCOMMAND","move"]],
			"fromlayer": "movetarget"
		},
		"selectfire": {
			"condition": ["HASPERFORMEDCOMMAND","move"],
			"fromlayer": "firetarget"
		}
	},
	"endturn": {
		"condition":["HASPERFORMEDCOMMAND","fire"],
		"commandcap": true,
		"endgame": {
			"blocked":{
				"hydration": ["findenemymoves"],
				"condition": ["EMPTY","enemymove"],
				"winner": ["CONTEXTVAL","CURRENTPLAYER"]
			}
		}
	},
	"commands": {
		"move": {
			"effects": [
				["MOVEUNIT",["IDAT",["MARKPOS","selectunit"]],["MARKPOS","selectmove"]]
			]
		},
		"fire": {
			"effects": [
				["CREATETERRAIN",["MARKPOS","selectfire"],{"type":["VAL","fire"]}]
			]
		}
	},
	"generators": {
		"findblocks": {
			"type": "spawn",
			"starts": ["ALLPOSINLAYER","UNITS","TERRAIN"],
			"draw": {
				"target": {
					"tolayer": "block"
				}
			}
		},
		"findmovetargets": {
			"type": "walker",
			"start": ["MARKPOS","selectunit"],
			"dirs": ["DIRS",[1,2,3,4,5,6,7,8]],
			"stoplayer": "blocks",
			"draw": {
				"step": {
					"tolayer": "movetarget"
				}
			}
		},
		"findfiretargets": {
			"type": "walker",
			"start": ["MARKINLAST","move","selectunit"],
			"dirs": ["DIRS",[1,2,3,4,5,6,7,8]],
			"stoplayer": "blocks",
			"draw": {
				"step": {
					"tolayer": "firetarget"
				}
			}
		},
		"findenemymoves": {
			"type": "walker",
			"starts": ["ALLPOSINLAYER","OPPUNITS"],
			"dirs": ["DIRS",[1,2,3,4,5,6,7,8]],
			"stoplayer": "blocks",
			"draw": {
				"step": {
					"tolayer": "enemymove"
				}
			}
		}
	}
}