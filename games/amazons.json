{
	"source": "http://www.chessvariants.org/other.dir/amazons.html",
	"board": {
		"height": 10,
		"width": 10
	},
	"setup": [
		["list",[1004,1007,4001,4010],{"owner":1,"group":"movers"}],
		["list",[10004,10007,7001,7010],{"owner":2,"group":"movers"}]
	],
	"startturn": {
		"hydration": ["findblocks","findfiretargets"]
	},
	"marks": {
		"selectunit": {
			"condition": ["not",["hasperformedcommand","move"]],
			"fromlayer": "mymovers",
			"hydration": ["findmovetargets"]
		},
		"selectmove": {
			"condition": ["not",["hasperformedcommand","move"]],
			"fromlayer": "movetarget"
		},
		"selectfire": {
			"condition": ["hasperformedcommand","move"],
			"fromlayer": "firetarget",
			"hydration": ["findhindered","findblocked"]
		}
	},
	"endturn": {
		"condition":["hasperformedcommand","fire"],
		"commandcap": true,
		"endgame": {
			"blocked":{
				"hydration": ["findenemymoves"],
				"condition": ["isempty","enemymove"],
				"winner": ["contextval","currentplayer"]
			}
		}
	},
	"commands": {
		"move": {
			"effects": [
				["moveunit",["idofunitat",["markpos","selectunit"]],["markpos","selectmove"]]
			]
		},
		"fire": {
			"effects": [
				["spawnunit",["markpos","selectfire"],{"group":"fires"}]
			]
		}
	},
	"generators": {
		"findmovetargets": {
			"type": "walker",
			"start": ["markpos","selectunit"],
			"dirs": ["dirs",[1,2,3,4,5,6,7,8]],
			"stoplayer": "units",
			"draw": {
				"step": {
					"tolayer": "movetarget"
				}
			}
		},
		"findfiretargets": {
			"type": "walker",
			"start": ["markinlast","move","selectunit"],
			"dirs": ["dirs",[1,2,3,4,5,6,7,8]],
			"stoplayer": "units",
			"draw": {
				"step": {
					"tolayer": "firetarget"
				}
			}
		},
		"findhindered": {
			"type": "nextto",
			"starts": ["markpos","selectfire"],
			"dirs": ["dirs",[1,2,3,4,5,6,7,8]],
			"draw": {
				"target": {
					"condition": ["isempty"]
				}
			}
		}
	}
}